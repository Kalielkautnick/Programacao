--UPDATE EM MASSA PARA ALTERAR A QUANTIDADE EM ESTOQUE DE MATERIAL IGUAL A QUANTIDADE EM ESTOQUE DO PRODUTO
--QUANDO CÓDIGO DO PRODUTO FOR IGUAL AO CÓDIGO DO MATERIAL, SENÃO, ELE FAZ INSERT NA TABELA

MERGE INTO ESTOQUE_MATERIAL EST_MAT
	USING (
	   SELECT
	   PRO.ID_PRODUTO,
     PRO.ID_COR,
	   PRO.QUANTIDADE AS QTDE
	   FROM ESTOQUE_PRO PRO) EST_PRO
ON EST_MAT.ID_MATERIAL = EST_PRO.ID_PRODUTO
WHEN MATCHED THEN 
UPDATE SET EST_MAT.QUANTIDADE = (EST_PRO.QTDE)
WHEN NOT MATCHED THEN 
INSERT (ID_MATERIAL, COR, DEPOSITO, QUANTIDADE, QUALIDADE)
VALUES (EST_PRO.ID_PRODUTO, EST_PRO.ID_COR, 4, 0, '1')
